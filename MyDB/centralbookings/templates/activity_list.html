<!DOCTYPE html>
<html>
<head>
    <title>Activity List</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="main-container">
        <div class="filter-sidebar">
            <h3>Filters</h3>
            <form method="get" class="filter-form">
                <label for="date">Filter by Date:</label>
                <input type="date" id="date" name="date" value="{{ selected_date }}">
                <br>
                <label for="organizer">Filter by Organizer:</label>
                <select id="organizer" name="organizer">
                    <option value="all" {% if not organizer_name or organizer_name == 'all' %}selected{% endif %}>All</option>
                    {% for organizer in organizers %}
                        <option value="{{ organizer.Organizer_Name }}" {% if organizer_name == organizer.Organizer_Name %}selected{% endif %}>{{ organizer.Organizer_Name }}</option>
                    {% endfor %}
                </select>
                <br>
                <label for="sort_order">Sort By Date and Time:</label>
                <select id="sort_order" name="sort_order">
                    <option value="asc" {% if sort_order == 'asc' %}selected{% endif %}>Earliest to Latest</option>
                    <option value="desc" {% if sort_order == 'desc' %}selected{% endif %}>Latest to Earliest</option>
                </select>
                <br>
                <button type="submit" class="button">Apply Filters</button>
            </form>
        </div>
        
        <div class="activity-list">
            <h2>Activity List</h2>
            {% if activities %}
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Organizer</th>
                                <th>Activity</th>
                                <th>Location</th>
                                <th>Date</th>
                                <th>Start Time</th>
                                <th>End Time</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for activity in activities %}
                                <tr>
                                    <td>{{ activity.Organizer.Organizer_Name }}</td>
                                    <td>{{ activity.Activity_Name }}</td>
                                    <td>{{ activity.Activity_Location }}</td>
                                    <td>{{ activity.Activity_Date|date:"F j, Y" }}</td>
                                    <td>{{ activity.Start_Time|time:"g:i A" }}</td>
                                    <td>{{ activity.End_Time|time:"g:i A" }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <p>No activities found for the selected filters.</p>
            {% endif %}
            
            <br>
            <form action="{% url 'home' %}">
                <button type="submit" class="back-button">Home</button>
            </form>
        </div>
    </div>
</body>
</html>
